// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Agent {
  uuid             String @id
  displayName      String @map("display_name")
  developerName    String @map("developer_name")
  description      String
  displayIcon      String @map("display_icon")
  fullPortrait     String @map("full_portrait")
  killfeedPortrait String @map("killfeed_portrait")
  voiceLine        String @map("voice_line")
  roleId           String @map("role_id")

  colors    AgentColor[]
  role      AgentRole      @relation(fields: [roleId], references: [uuid])
  abilities AgentAbility[]

  @@map("agent")
}

model AgentColor {
  agentId String @map("agent_id")
  color   String

  agent Agent @relation(fields: [agentId], references: [uuid])

  @@unique([agentId, color])
  @@map("agent_color")
}

model AgentRole {
  uuid        String @id
  displayName String @map("display_name")
  description String
  displayIcon String @map("display_icon")

  agents Agent[]

  @@map("agent_role")
}

model AgentAbility {
  agentId     String      @map("agent_id")
  slot        AbilitySlot
  displayName String      @map("display_name")
  description String
  displayIcon String      @map("display_icon")

  agent Agent @relation(fields: [agentId], references: [uuid])

  @@unique([agentId, slot])
  @@map("agent_ability")
}

enum AbilitySlot {
  Ability1
  Ability2
  Grenade
  Ultimate
}
